<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Finance Reinvented">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/57242f5850.js" crossorigin="anonymous"></script>

    <!-- Styling Links -->
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/bills.css">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    
    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <title>My Bills</title>
</head>
<body>
    <div class="container-fluid px-4">
      <!-- nav bar -->
      <nav class="navbar navbar-expand-lg">
        <!-- Burger Menu for Smaller Screens -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <i class="navbar-toggler-icon fa-solid fa-bars"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mx-auto">
            <!-- Home -->
            <li class="nav-item mx-4">
              <a href="/dashboard.html"><i class="fa-solid fa-house px-2"></i></a>
            </li>

            <!-- Bills -->
            <li class="nav-item mx-4">
              <a class="active" href="bills.html"><i class="fa-solid fa-money-bill px-2"></i>Bills</a>
            </li>

            <!-- About Us -->
            <li class="nav-item mx-4">
              <a href="about.html"><i class="fa-solid fa-address-card px-2"></i>About Us</a>
            </li>

            <!-- Contact Us -->
            <li class="nav-item mx-4">
              <a href="contact.html"><i class="fa-solid fa-phone px-2"></i>Contact Us</a>
            </li>

            <!-- Settings -->
            <li class="nav-item mx-4">
              <a href="settings.html"><i class="fa-solid fa-gear px-2"></i>Settings</a>
            </li>

            <!-- Logout -->
            <li class="nav-item mx-4">
              <a href="/user/logout"><i class="fa-solid fa-right-from-bracket px-2"></i>Logout</a>
            </li>
          </ul>
        </div>
      </nav>
  
      <main class="py-5">
        <div class="row py-5 my-5 px-3">
          <div class="col mt-5">
            <!-- bills form -->
            <div class="card bills-card">
              <div class="card-body py-5 px-5">
                <form action="/bills" method="post">
                  <div data-mdb-input-int class="form-outline mb-2">
                    <label for="billName">Name</label>
                    <input type="text" class="form-control" id="name" placeholder="Enter bill name" required name="bills[name]">
                  </div>
                  
                  <!-- figure out how to prevent it from going negative -->
                  <div data-mdb-input-int class="form-outline mb-2">
                    <label for="billAmount">Amount</label>
                    <input type="number" class="form-control" id="amount" placeholder="Enter bill amount" required name="bills[amount]">
                  </div>
  
                  <div class="row">
                    <div class="col">
                      <div data-mdb-input-int class="form-outline mb-2">
                        <label for="billFrequency">Frequency</label>
                        <select class="form-control" id="frequency" required name="bills[frequency]">
                          <option value="Monthly">Monthly</option>
                          <option value="Quarterly">Quarterly</option>
                          <option value="Yearly">Yearly</option>
                          <!-- Add more options as needed -->
                        </select>
                      </div>
                    </div>
                    <div class="col">
                      <div data-mdb-input-int class="form-outline mb-2">
                        <label for="billNextDueDate">Next Due Date</label>
                        <input type="date" class="form-control" id="dueDate" required name="bills[dueDate]">
                      </div>
                    </div>
                  </div>
  
                  <button type="submit" class="btn btn-block btn-lg btn-signup mt-4">Add Bill</button>
                </form>
              </div>
            </div>
          </div>

          <div class="col mt-5">
            <div class="calendar">
              <div class="month">      
                <ul>
                  <li class="prev"><i class="fa-solid fa-chevron-left"></i></li>
                  <li class="next"><i class="fa-solid fa-chevron-right"></i></li>
                  <li>
                    May
                    <br>
                    <span style="font-size:18px">2024</span>
                  </li>
                </ul>
              </div>
              
              <ul class="weekdays">
                <li>Mo</li>
                <li>Tu</li>
                <li>We</li>
                <li>Th</li>
                <li>Fr</li>
                <li>Sa</li>
                <li>Su</li>
              </ul>
              
              <ul class="days">  
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li>7</li>
                <li>8</li>
                <li>9</li>
                <li><span class="active">10</span></li>
                <li>11</li>
                <li>12</li>
                <li>13</li>
                <li>14</li>
                <li>15</li>
                <li>16</li>
                <li>17</li>
                <li>18</li>
                <li>19</li>
                <li>20</li>
                <li>21</li>
                <li>22</li>
                <li>23</li>
                <li>24</li>
                <li>25</li>
                <li>26</li>
                <li>27</li>
                <li>28</li>
                <li>29</li>
                <li>30</li>
                <li>31</li>
              </ul>
            </div> 
          </div>
        </div>
        
      </div>

      <footer class="footer fixed-bottom mx-4">
        <div class="copyright d-flex align-items-center justify-content-center py-2 font-weight-bold">© 2024 Finance and $tonks LLC Inc. ™</div>
      </footer>
    </div>

    <script>
      const params = new URLSearchParams(window.location.search);
      const error = params.get('error');
      const billsForm = document.getElementById('bills-form');
      const errorMessage = document.createElement('p');
      errorMessage.className = 'error-message';

      if (error === 'billsNotSaved') {
        errorMessage.textContent = 'Bill not saved.';
      }

      if (errorMessage.textContent) {
        billsForm.prepend(errorMessage);
      }
    </script>
    <!-- <script>
        const addBillForm = document.getElementById('addBillForm');

        addBillForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(addBillForm);
            try {
                await fetch('/api/bills/add', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({
                    userId: 'user._id',
                    name: formData.get('billName'),
                    amount: formData.get('billAmount'),
                    frequency: formData.get('billFrequency'),
                    dueDate: formData.get('billDueDate')
                  })
                });
                window.location.href = '/pages/dashboard.html';
            } 
            catch (error) {
                console.error('Failed to add bill', error);
            }
        });
    </script> -->
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>